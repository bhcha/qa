# 품질 기준 및 표준

## 📋 개요
이 문서는 ldx QA 모듈에서 사용하는 품질 기준과 표준을 정의합니다.

## 🎯 전체 품질 기준

### 합격 기준
다음 모든 조건을 만족해야 품질 검사를 통과합니다:

| 메트릭 | 기준 | 설명 |
|--------|------|------|
| **Instruction Coverage** | ≥ 80% | 코드 실행 커버리지 |
| **Branch Coverage** | ≥ 70% | 분기 커버리지 |
| **Checkstyle 위반** | ≤ 50개 | 코딩 스타일 위반 |
| **PMD 위반** | ≤ 20개 | 코드 품질 위반 |
| **SpotBugs 위반** | ≤ 10개 | 버그 패턴 위반 |

### 품질 등급
- **A등급**: 모든 기준 만족 + 추가 우수 기준 달성
- **B등급**: 모든 기준 만족
- **C등급**: 일부 기준 미달성 (경고)
- **F등급**: 주요 기준 미달성 (실패)

## 🔍 정적 분석 기준

### Checkstyle 규칙
코딩 스타일과 규약을 검사합니다:

#### 주요 규칙
- **명명 규칙**: 클래스명, 메서드명, 변수명 Java 규약 준수
- **들여쓰기**: 일관된 들여쓰기 (4 spaces)
- **줄 길이**: 최대 120자
- **Import 정리**: 불필요한 import 제거, 순서 정리
- **괄호 위치**: 여는 괄호는 같은 줄에

#### 예외 규칙
- 테스트 클래스: 메서드 길이 제한 완화
- DTO 클래스: 접근자 가시성 제한 완화
- 설정 클래스: 유틸리티 클래스 규칙 제외

### PMD 규칙
코드 품질과 잠재적 문제를 검사합니다:

#### 주요 규칙
- **복잡도**: 순환 복잡도 ≤ 12
- **메서드 길이**: 최대 150줄
- **클래스 크기**: 최대 1500줄
- **매직 넘버**: 상수화 권장
- **예외 처리**: 적절한 예외 처리

#### 제외 규칙
- 테스트 클래스: 매직 넘버 허용
- Spring 컴포넌트: 일부 설계 규칙 완화
- 도메인 클래스: 특정 패턴 허용

### SpotBugs 규칙
버그 패턴과 보안 이슈를 검사합니다:

#### 주요 규칙
- **Null 포인터**: Null 체크 누락 감지
- **동시성**: 스레드 안전성 문제
- **보안**: 보안 취약점 패턴
- **성능**: 성능 문제 패턴
- **정확성**: 로직 오류 패턴

#### 제외 규칙
- Spring 설정: 직렬화 경고 제외
- 테스트 클래스: 미사용 필드 경고 제외
- DTO 클래스: 접근자 관련 경고 제외

## 📊 커버리지 기준

### JaCoCo 커버리지
테스트 커버리지를 측정합니다:

#### 측정 메트릭
- **Instruction Coverage**: 바이트코드 명령어 실행 비율
- **Branch Coverage**: 분기 조건 커버리지
- **Line Coverage**: 소스 코드 줄 커버리지
- **Method Coverage**: 메서드 호출 커버리지
- **Class Coverage**: 클래스 로딩 커버리지

#### 제외 대상
- 설정 클래스 (`**/*Config.java`)
- 애플리케이션 메인 클래스
- 자동 생성 코드
- 예외 클래스 생성자

### 커버리지 개선 가이드
1. **RED**: 실행되지 않은 코드 → 테스트 추가
2. **YELLOW**: 부분적으로 실행된 분기 → 분기 테스트 추가
3. **GREEN**: 완전히 커버된 코드 → 유지

## 🤖 AI 분석 기준

### Gemini AI 분석
코드 품질과 아키텍처를 AI로 분석합니다:

#### 분석 영역
- **아키텍처 준수**: 헥사고날 아키텍처 패턴 준수
- **보안 검증**: 보안 취약점 및 베스트 프랙티스
- **CQRS 패턴**: 명령과 조회 분리 원칙
- **TDD 준수**: 테스트 주도 개발 원칙
- **코드 품질**: 가독성, 유지보수성, 확장성

#### 평가 기준
- **Critical**: 즉시 수정 필요 (빌드 실패)
- **Major**: 우선 수정 권장
- **Minor**: 개선 권장
- **Info**: 정보성 피드백

## 🔧 커스터마이징

### 기준 조정
프로젝트 특성에 맞게 기준을 조정할 수 있습니다:

```properties
# config/qa.properties에서 조정
qa.quality.coverage.instruction.minimum=85
qa.quality.coverage.branch.minimum=75
qa.quality.violations.checkstyle.maximum=30
qa.quality.violations.pmd.maximum=15
qa.quality.violations.spotbugs.maximum=5
```

### 규칙 비활성화
특정 규칙을 비활성화할 수 있습니다:

```properties
# 특정 분석기 비활성화
qa.static.checkstyle.enabled=false
qa.static.pmd.enabled=false
qa.static.spotbugs.enabled=false
```

## 📈 품질 트렌드

### 지속적 개선
- **매주**: 품질 메트릭 리뷰
- **매월**: 기준 조정 검토
- **분기별**: 품질 표준 업데이트

### 품질 대시보드
- 커버리지 트렌드
- 위반 건수 추이
- 품질 등급 변화
- 팀별 품질 현황

## 🎯 목표 설정

### 단기 목표 (1-3개월)
- 모든 기준 만족 달성
- 지속적인 품질 유지
- 팀 내 품질 문화 정착

### 장기 목표 (6개월-1년)
- 커버리지 90% 이상 달성
- 위반 건수 Zero 달성
- 자동화된 품질 관리 체계 구축

---

품질 기준 관련 문의사항은 [QA Guide](qa-guide.md)를 참조하거나 담당자에게 문의하세요.