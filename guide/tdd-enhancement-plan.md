# TDD ë³´ì™„ ê³„íš

## ğŸ¯ ëª©ì 
Kent Beckì˜ TDDì™€ Tidy First ì›ì¹™ì— ë”°ë¥¸ ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ ê°œë°œ ê°•í™”

## ğŸ“‹ í˜„ì¬ TDD ì„±ìˆ™ë„ í‰ê°€

### âœ… ì˜ êµ¬í˜„ëœ ë¶€ë¶„
- **Red-Green-Refactor ì‚¬ì´í´**: ë„ë©”ì¸ ëª¨ë¸ì—ì„œ ì˜ ì ìš©ë¨
- **í…ŒìŠ¤íŠ¸ ìš°ì„  ê°œë°œ**: Authentication ë„ë©”ì¸ ì™„ì„±ë„ ë†’ìŒ
- **ì‘ì€ ë‹¨ìœ„ ì»¤ë°‹**: êµ¬ì¡° ë³€ê²½ê³¼ ê¸°ëŠ¥ ë³€ê²½ ë¶„ë¦¬
- **ì˜ë¯¸ìˆëŠ” í…ŒìŠ¤íŠ¸ëª…**: í•œê¸€ë¡œ ëª…í™•í•œ ì˜ë„ í‘œí˜„

### âš ï¸ ê°œì„  í•„ìš” ì˜ì—­
- **Mock ê³¼ë‹¤ ì‚¬ìš©**: ì¼ë¶€ í…ŒìŠ¤íŠ¸ì—ì„œ ë¶ˆí•„ìš”í•œ Mock
- **í†µí•© í…ŒìŠ¤íŠ¸ ì˜ì¡´ì„±**: Bean ì¤‘ë³µ ë¬¸ì œë¡œ ì œê±°ë¨
- **ì—£ì§€ ì¼€ì´ìŠ¤ ë¶€ì¡±**: ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ë¯¸í¡
- **ë¦¬íŒ©í† ë§ ë¹ˆë„**: êµ¬ì¡° ê°œì„ ì´ ê¸°ëŠ¥ ì¶”ê°€ì™€ ì„ì„

## ğŸ”„ TDD ì‚¬ì´í´ ê°•í™” ê³„íš

### 1. RED (ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸) ê°œì„ 

#### í˜„ì¬ ë¬¸ì œì 
```java
// ë„ˆë¬´ ë§ì€ ê¸°ëŠ¥ì„ í•œë²ˆì— í…ŒìŠ¤íŠ¸
@Test
void shouldAuthenticateUserWithValidCredentials() {
    // Given: ë³µì¡í•œ ì„¤ì •
    // When: ì—¬ëŸ¬ ë‹¨ê³„ ì‹¤í–‰
    // Then: ì—¬ëŸ¬ ê²€ì¦ í•­ëª©
}
```

#### ê°œì„  ë°©í–¥
```java
// í•˜ë‚˜ì˜ ì‘ì€ í–‰ë™ë§Œ í…ŒìŠ¤íŠ¸
@Test
void ìœ íš¨í•œ_ì´ë©”ì¼ë¡œ_ì‚¬ìš©ìë¥¼_ì°¾ì„_ìˆ˜_ìˆì–´ì•¼_í•œë‹¤() {
    // Given: ìµœì†Œí•œì˜ ì„¤ì •
    String validEmail = "user@example.com";
    
    // When: ë‹¨ì¼ í–‰ë™
    User user = userRepository.findByEmail(validEmail);
    
    // Then: ë‹¨ì¼ ê²€ì¦
    assertThat(user).isNotNull();
}
```

### 2. GREEN (ìµœì†Œ êµ¬í˜„) ê°œì„ 

#### Tidy First ì›ì¹™ ì ìš©
1. **êµ¬ì¡° ë³€ê²½ ë¨¼ì €**: ê¸°ëŠ¥ ì¶”ê°€ ì „ ì½”ë“œ ì •ë¦¬
2. **ìµœì†Œ êµ¬í˜„**: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ì½”ë“œ
3. **ì ì§„ì  ê°œì„ **: í•œ ë²ˆì— í•˜ë‚˜ì”©ë§Œ ë³€ê²½

#### ì˜ˆì‹œ ì›Œí¬í”Œë¡œìš°
```bash
# 1. êµ¬ì¡° ì •ë¦¬ (Structural Change)
git commit -m "refactor: ë©”ì„œë“œ ì´ë¦„ ëª…í™•í™” - extractUserCredentials"

# 2. ê¸°ëŠ¥ ì¶”ê°€ (Behavioral Change)  
git commit -m "feat: ì´ë©”ì¼ ê²€ì¦ ë¡œì§ ì¶”ê°€ - validateEmailFormat"

# 3. ì¶”ê°€ êµ¬ì¡° ì •ë¦¬
git commit -m "refactor: ì¤‘ë³µ ì½”ë“œ ì œê±° - ê³µí†µ ê²€ì¦ ë©”ì„œë“œ ì¶”ì¶œ"
```

### 3. REFACTOR (êµ¬ì¡° ê°œì„ ) ì²´ê³„í™”

#### ë¦¬íŒ©í† ë§ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] **ì¤‘ë³µ ì œê±°**: ë™ì¼í•œ ë¡œì§ í†µí•©
- [ ] **ì˜ë¯¸ ëª…í™•í™”**: ë³€ìˆ˜, ë©”ì„œë“œëª… ê°œì„ 
- [ ] **ë³µì¡ë„ ê°ì†Œ**: ê¸´ ë©”ì„œë“œ ë¶„í• 
- [ ] **ì˜ì¡´ì„± ëª…ì‹œí™”**: ì¸í„°í˜ì´ìŠ¤ í™œìš©
- [ ] **í…ŒìŠ¤íŠ¸ ê²€ì¦**: ë¦¬íŒ©í† ë§ í›„ ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼

## ğŸ“ TDD ì‹¤ì²œ ê°€ì´ë“œ

### ê°œë°œ í”„ë¡œì„¸ìŠ¤

#### 1ë‹¨ê³„: í…ŒìŠ¤íŠ¸ ê³„íš ìˆ˜ë¦½
```markdown
## ê¸°ëŠ¥: ì‚¬ìš©ì ì¸ì¦
### í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:
1. [ ] ìœ íš¨í•œ ì´ë©”ì¼ í˜•ì‹ ê²€ì¦
2. [ ] ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ ê²€ì¦  
3. [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ì ì²˜ë¦¬
4. [ ] ì˜ëª»ëœ ë¹„ë°€ë²ˆí˜¸ ì²˜ë¦¬
5. [ ] ê³„ì • ì ê¸ˆ ì²˜ë¦¬
```

#### 2ë‹¨ê³„: Red-Green-Refactor ìˆœí™˜
```java
// RED: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸
@Test
void ì´ë©”ì¼ì´_nullì´ë©´_ì˜ˆì™¸ë¥¼_ë°œìƒì‹œì¼œì•¼_í•œë‹¤() {
    assertThrows(IllegalArgumentException.class, 
        () -> new Email(null));
}

// GREEN: ìµœì†Œ êµ¬í˜„
public Email(String value) {
    if (value == null) {
        throw new IllegalArgumentException();
    }
    this.value = value;
}

// REFACTOR: ì˜ë¯¸ ëª…í™•í™” (ë³„ë„ ì»¤ë°‹)
public Email(String value) {
    validateNotNull(value);
    this.value = value;
}

private void validateNotNull(String email) {
    if (email == null) {
        throw new IllegalArgumentException("ì´ë©”ì¼ì€ nullì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤");
    }
}
```

#### 3ë‹¨ê³„: ì ì§„ì  í™•ì¥
- í•œ ë²ˆì— í•˜ë‚˜ì˜ í…ŒìŠ¤íŠ¸ë§Œ ì¶”ê°€
- ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìµœì†Œ êµ¬í˜„
- 2-3ê°œ í…ŒìŠ¤íŠ¸ í›„ ë¦¬íŒ©í† ë§

### Mock ì‚¬ìš© ê°€ì´ë“œ

#### ğŸŸ¢ Mock ì‚¬ìš©ì´ ì ì ˆí•œ ê²½ìš°
```java
@Test
void ì™¸ë¶€_API_í˜¸ì¶œ_ì‹¤íŒ¨ì‹œ_ì¬ì‹œë„í•´ì•¼_í•œë‹¤() {
    // Given: ì™¸ë¶€ ì‹œìŠ¤í…œ Mock
    when(externalApiClient.call()).thenThrow(new NetworkException());
    
    // When & Then: ì¬ì‹œë„ ë¡œì§ ê²€ì¦
    assertThat(service.processWithRetry()).isTrue();
    verify(externalApiClient, times(3)).call();
}
```

#### ğŸ”´ Mock ì‚¬ìš©ì„ í”¼í•´ì•¼ í•˜ëŠ” ê²½ìš°
```java
// ë‚˜ìœ ì˜ˆ: ë„ë©”ì¸ ê°ì²´ë¥¼ Mock
@Test
void shouldCalculatePrice() {
    Product mockProduct = mock(Product.class);
    when(mockProduct.getPrice()).thenReturn(BigDecimal.valueOf(100));
    // ì‹¤ì œ Product ê°ì²´ë¥¼ ì‚¬ìš©í•´ì•¼ í•¨
}

// ì¢‹ì€ ì˜ˆ: ì‹¤ì œ ê°ì²´ ì‚¬ìš©
@Test
void ìƒí’ˆ_ê°€ê²©ì„_ì˜¬ë°”ë¥´ê²Œ_ê³„ì‚°í•´ì•¼_í•œë‹¤() {
    Product product = Product.builder()
        .name("í…ŒìŠ¤íŠ¸ ìƒí’ˆ")
        .price(BigDecimal.valueOf(100))
        .build();
        
    assertThat(product.getPrice()).isEqualTo(BigDecimal.valueOf(100));
}
```

## ğŸ“Š TDD í’ˆì§ˆ ì¸¡ì •

### í…ŒìŠ¤íŠ¸ í’ˆì§ˆ ì§€í‘œ
1. **í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€**: 80% ì´ìƒ (ëª…ë ¹ì–´ ê¸°ì¤€)
2. **ìˆœí™˜ ë³µì¡ë„**: 10 ì´í•˜ (ë©”ì„œë“œë³„)
3. **í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì†ë„**: 30ì´ˆ ì´ë‚´ (ì „ì²´)
4. **í…ŒìŠ¤íŠ¸ ì•ˆì •ì„±**: 100% ì„±ê³µë¥ 

### ì½”ë“œ í’ˆì§ˆ ì§€í‘œ
1. **ì¤‘ë³µë„**: SonarQube 3% ì´í•˜
2. **ê¸°ìˆ  ë¶€ì±„**: A ë“±ê¸‰ ìœ ì§€
3. **ì½”ë“œ ëƒ„ìƒˆ**: 0ê°œ ëª©í‘œ
4. **ë³´ì•ˆ ì·¨ì•½ì **: 0ê°œ ìœ ì§€

## ğŸ“ TDD í•™ìŠµ ê³„íš

### 1ì£¼ì°¨: ê¸°ë³¸ ì‚¬ì´í´ ìŠµë“
- [ ] Red-Green-Refactor 10íšŒ ë°˜ë³µ
- [ ] ì‘ì€ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± ì—°ìŠµ
- [ ] ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™ ì •ì°©

### 2ì£¼ì°¨: Mockê³¼ Stub í™œìš©
- [ ] ì™¸ë¶€ ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ ë°©ë²•
- [ ] Mock ìµœì†Œí™” ê¸°ë²•
- [ ] Test Double íŒ¨í„´ í•™ìŠµ

### 3ì£¼ì°¨: ë¦¬íŒ©í† ë§ ê¸°ë²•
- [ ] Tidy First ì ìš©
- [ ] ì½”ë“œ ëƒ„ìƒˆ ì œê±°
- [ ] êµ¬ì¡°ì™€ í–‰ë™ ë¶„ë¦¬

### 4ì£¼ì°¨: ê³ ê¸‰ TDD íŒ¨í„´
- [ ] í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ êµ¬ì¶•
- [ ] í†µí•© í…ŒìŠ¤íŠ¸ ì „ëµ
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ í†µí•©

## âš¡ ì¦‰ì‹œ ì ìš© ê°€ëŠ¥í•œ TDD ê°œì„ ì‚¬í•­

### 1. í…ŒìŠ¤íŠ¸ ëª…ëª… ê·œì¹™ í†µì¼
```java
// Before: ì˜ì–´ + ì• ë§¤í•œ ì˜ë¯¸
@Test
void testUserLogin() { }

// After: í•œê¸€ + ëª…í™•í•œ ì˜ë„
@Test  
void ìœ íš¨í•œ_ìê²©ì¦ëª…ìœ¼ë¡œ_ë¡œê·¸ì¸í•˜ë©´_í† í°ì„_ë°˜í™˜í•´ì•¼_í•œë‹¤() { }
```

### 2. Given-When-Then êµ¬ì¡° ê°•ì œ
```java
@Test
void ì˜ëª»ëœ_ë¹„ë°€ë²ˆí˜¸ë¡œ_ë¡œê·¸ì¸í•˜ë©´_ì˜ˆì™¸ë¥¼_ë°œìƒì‹œì¼œì•¼_í•œë‹¤() {
    // Given
    String email = "user@example.com";
    String wrongPassword = "wrongpassword";
    
    // When & Then
    assertThrows(AuthenticationException.class, 
        () -> authService.login(email, wrongPassword));
}
```

### 3. í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¹Œë” íŒ¨í„´
```java
public class UserTestDataBuilder {
    public static User.Builder validUser() {
        return User.builder()
            .email("test@example.com")
            .password("validpassword123")
            .name("í…ŒìŠ¤íŠ¸ ì‚¬ìš©ì");
    }
}

// ì‚¬ìš©ë²•
@Test
void ìœ íš¨í•œ_ì‚¬ìš©ì_ì •ë³´ë¡œ_íšŒì›ê°€ì…í• _ìˆ˜_ìˆì–´ì•¼_í•œë‹¤() {
    User user = UserTestDataBuilder.validUser().build();
    assertThat(user.isValid()).isTrue();
}
```

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **adapter.shared íŒ¨í‚¤ì§€**: TDDë¡œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 11% â†’ 70%
2. **ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ ë³´ê°•**: ê° ë„ë©”ì¸ë³„ ì—£ì§€ ì¼€ì´ìŠ¤ ì¶”ê°€
3. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ëŠë¦° í…ŒìŠ¤íŠ¸ ìµœì í™”
4. **ë¬¸ì„œí™”**: ëª¨ë“  TDD ì‚¬ì´í´ ê¸°ë¡

## âœ… ì„±ê³µ ê¸°ì¤€

- [ ] ëª¨ë“  ìƒˆ ê¸°ëŠ¥ì„ TDDë¡œ ê°œë°œ
- [ ] ë¦¬íŒ©í† ë§ê³¼ ê¸°ëŠ¥ ì¶”ê°€ ë¶„ë¦¬
- [ ] í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ë‹¬ì„±
- [ ] 100% í…ŒìŠ¤íŠ¸ ì„±ê³µë¥  ìœ ì§€
- [ ] ê°œë°œ ì†ë„ í–¥ìƒ (ì‘ì€ ë‹¨ìœ„ ë°˜ë³µ)