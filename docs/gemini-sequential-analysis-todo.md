# Gemini AI 지침별 완전 동기 순차 분석 시스템 TODO

## 📋 프로젝트 개요
config/ai/ 폴더의 지침 파일들을 완전 동기 방식으로 순차 실행하여 지침별 리포트를 생성하는 시스템 구현

## 🎯 핵심 목표
1. **완전 동기 실행**: 각 지침이 100% 완료된 후 다음 지침 시작 (대기시간 없음)
2. **지침별 분석**: 각 가이드 파일(*.md)에 맞는 특화된 프롬프트 생성
3. **개별 리포트**: 지침별로 독립적인 분석 결과 생성
4. **통합 리포트**: 모든 지침 분석 결과를 종합한 최종 리포트

---

## 📝 작업 단계별 TODO

### 🔴 1. 준비 작업 (Priority: High)
- [ ] **프로젝트 구조 분석**
  - [ ] 기존 GeminiAnalyzer 클래스 구조 파악
  - [ ] QualityAnalyzer 통합 방식 이해
  - [ ] QaConfiguration 설정 시스템 분석
- [ ] **config/ai 디렉토리 구조 파악**
  - [ ] identitybridge 프로젝트의 config/ai/*.md 파일 목록 확인
  - [ ] 각 가이드 파일의 내용과 특성 분석
  - [ ] 지침 파일별 우선순위 및 실행 순서 정의
- [ ] **요구사항 명세서 작성**
  - [ ] 입력: config/ai/*.md 파일들
  - [ ] 출력: 지침별 개별 리포트 + 통합 리포트
  - [ ] 제약사항: 완전 동기 실행, 에러 격리

### 🔴 2. 1단계: 새로운 분석기 구조 설계 (Priority: High)
- [ ] **SequentialGuideGeminiAnalyzer 클래스 설계**
  - [ ] 클래스 인터페이스 정의
  - [ ] 지침 파일 목록 관리 방식
  - [ ] 순차 실행 메인 로직 설계
- [ ] **기존 GeminiAnalyzer 리팩토링 계획**
  - [ ] 단일 지침 처리용으로 분리
  - [ ] 공통 로직 추상화
  - [ ] 재사용 가능한 컴포넌트 식별
- [ ] **지침 파일 탐지 로직 설계**
  - [ ] 파일 시스템 스캔 알고리즘
  - [ ] 파일명 기반 정렬 및 우선순위
  - [ ] 활성화/비활성화 필터링

### 🟡 3. 2단계: 지침별 프롬프트 시스템 (Priority: Medium)
- [ ] **GuideSpecificPromptBuilder 클래스 설계**
  - [ ] 가이드 파일 파싱 로직
  - [ ] 프롬프트 템플릿 시스템
  - [ ] 지침별 맞춤 요청 생성
- [ ] **가이드 파일 읽기 로직 구현**
  - [ ] 마크다운 파일 파싱
  - [ ] 메타데이터 추출 (제목, 카테고리 등)
  - [ ] 내용 요약 및 핵심 지침 추출
- [ ] **프롬프트 생성 알고리즘**
  - [ ] 지침 내용을 프롬프트에 통합
  - [ ] 분석 범위 및 포커스 명시
  - [ ] 출력 형식 가이드라인 포함

### 🔴 4. 3단계: 완전 동기 실행 엔진 (Priority: High)
- [ ] **순차 실행 루프 구현**
  - [ ] for-each 기반 순차 처리
  - [ ] 현재 지침 완료까지 완전 대기
  - [ ] 다음 지침 시작 전 상태 확인
- [ ] **Process.waitFor() 기반 완전 대기**
  - [ ] Gemini CLI 프로세스 완료 대기
  - [ ] 타임아웃 처리 및 강제 종료
  - [ ] 프로세스 상태 모니터링
- [ ] **에러 처리 및 복구 로직**
  - [ ] 개별 지침 실패 격리
  - [ ] 실패한 지침 건너뛰기 옵션
  - [ ] 에러 로그 및 상세 정보 수집
- [ ] **진행 상황 로깅 시스템**
  - [ ] `[1/4] 일반 코드 품질 분석 중... ✓ 완료` 형식
  - [ ] 실시간 진행률 표시
  - [ ] 각 단계별 소요 시간 측정

### 🟡 5. 4단계: 결과 집계 및 리포팅 (Priority: Medium)
- [ ] **GuideAnalysisResult 데이터 모델**
  - [ ] 지침별 결과 구조 정의
  - [ ] 메타데이터 (지침명, 실행시간, 상태)
  - [ ] 기존 AnalysisResult와의 호환성
- [ ] **개별 리포트 생성 로직**
  - [ ] 지침별 HTML 리포트
  - [ ] 지침별 JSON 리포트
  - [ ] 파일명 규칙: `01-gemini-guide-report.html`
- [ ] **통합 리포트 섹션 추가**
  - [ ] 지침별 요약 섹션
  - [ ] 종합 결과 및 권장사항
  - [ ] 네비게이션 및 인덱스

### 🟡 6. 지원 클래스 구현 (Priority: Medium)
- [ ] **GuideFileLoader 구현**
  - [ ] 파일 시스템 스캔
  - [ ] 파일 유효성 검증
  - [ ] 캐싱 및 성능 최적화
- [ ] **GuideMetadata 데이터 클래스**
  - [ ] 파일명, 경로, 크기
  - [ ] 지침 카테고리 및 우선순위
  - [ ] 마지막 수정 시간
- [ ] **GuideExecutionTracker 구현**
  - [ ] 실행 상태 추적
  - [ ] 진행률 계산
  - [ ] 실행 히스토리 관리

### 🟡 7. 기존 코드 통합 (Priority: Medium)
- [ ] **QualityAnalyzer 수정**
  - [ ] SequentialGuideGeminiAnalyzer 통합
  - [ ] 기존 GeminiAnalyzer와의 선택적 사용
  - [ ] 설정에 따른 분기 처리
- [ ] **QaConfiguration 설정 확장**
  - [ ] `qa.ai.gemini.guides.*` 설정 항목 추가
  - [ ] 지침별 활성화/비활성화
  - [ ] 디렉토리 경로 설정
- [ ] **HtmlReportGenerator 수정**
  - [ ] 지침별 섹션 템플릿 추가
  - [ ] 통합 네비게이션 구현
  - [ ] CSS 스타일 확장
- [ ] **JsonReportGenerator 수정**
  - [ ] 지침별 결과 배열 추가
  - [ ] 메타데이터 포함
  - [ ] 스키마 확장

### 🟢 8. 설정 시스템 확장 (Priority: Low)
- [ ] **qa.properties 새 설정 항목**
  ```properties
  qa.ai.gemini.guides.enabled=true
  qa.ai.gemini.guides.directory=config/ai
  qa.ai.gemini.guides.sequential=true
  qa.ai.gemini.guides.parallel=false
  ```
- [ ] **지침별 활성화/비활성화**
  ```properties
  qa.ai.gemini.guide.general.enabled=true
  qa.ai.gemini.guide.security.enabled=true
  qa.ai.gemini.guide.tdd.enabled=true
  ```
- [ ] **실행 순서 커스터마이징**
  ```properties
  qa.ai.gemini.guides.order=gemini-guide,secure-guide,tdd-guide
  ```

### 🔴 9. 테스트 및 검증 (Priority: High)
- [ ] **단위 테스트 작성**
  - [ ] GuideFileLoader 테스트
  - [ ] GuideSpecificPromptBuilder 테스트
  - [ ] SequentialGuideGeminiAnalyzer 테스트
- [ ] **통합 테스트 작성**
  - [ ] 전체 워크플로우 테스트
  - [ ] 에러 시나리오 테스트
  - [ ] 리포트 생성 테스트
- [ ] **실제 프로젝트 대상 테스트**
  - [ ] identitybridge 프로젝트 대상 실행
  - [ ] 각 지침별 결과 검증
  - [ ] 성능 및 안정성 확인

### 🟢 10. 문서화 (Priority: Low)
- [ ] **API 문서 작성**
  - [ ] 새로운 클래스들의 Javadoc
  - [ ] 설정 옵션 상세 설명
  - [ ] 사용 예제 코드
- [ ] **사용법 가이드 작성**
  - [ ] 지침 파일 작성 가이드
  - [ ] 설정 방법 및 옵션
  - [ ] 트러블슈팅 가이드

---

## ⚡ 우선순위별 실행 계획

### Phase 1: 핵심 기능 구현 (3-4일)
1. **준비 작업** → **1단계 설계** → **3단계 동기 실행 엔진**
2. 완전 동기 방식의 순차 실행이 핵심이므로 3단계를 우선 구현

### Phase 2: 프롬프트 및 리포팅 (2-3일)
1. **2단계 프롬프트 시스템** → **4단계 리포팅**
2. 지침별 특화 분석을 위한 프롬프트 생성 구현

### Phase 3: 통합 및 안정화 (2-3일)
1. **기존 코드 통합** → **테스트 및 검증**
2. 전체 시스템 통합 및 안정성 확보

### Phase 4: 마무리 (1일)
1. **설정 시스템 확장** → **문서화**

---

## 📊 성공 기준

### 기능적 요구사항
- [ ] config/ai/*.md 파일들을 순차적으로 처리
- [ ] 각 지침이 100% 완료된 후 다음 지침 시작
- [ ] 지침별 개별 리포트 생성
- [ ] 통합 리포트에 모든 지침 결과 포함

### 비기능적 요구사항
- [ ] 개별 지침 실패가 전체에 영향 주지 않음
- [ ] 실시간 진행 상황 표시
- [ ] 메모리 효율적 사용
- [ ] 설정을 통한 유연한 제어

### 품질 기준
- [ ] 단위 테스트 커버리지 80% 이상
- [ ] 통합 테스트 통과
- [ ] 실제 프로젝트 대상 성공적 실행
- [ ] 코드 리뷰 통과

---

## 📝 작업 진행 체크리스트

### 매일 체크
- [ ] 진행된 작업 항목 체크
- [ ] 다음 우선순위 작업 식별
- [ ] 블로커 및 이슈 사항 기록

### 단계 완료 시
- [ ] 코드 리뷰 요청
- [ ] 테스트 실행 및 통과 확인
- [ ] 문서 업데이트
- [ ] 다음 단계 준비

### 최종 완료 시
- [ ] 전체 기능 테스트
- [ ] 성능 검증
- [ ] 문서 최종 검토
- [ ] 배포 준비

---

**마지막 업데이트**: 2025-07-20  
**예상 완료일**: 2025-07-30  
**담당자**: Claude AI Assistant